<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ts-codemod-lib</title><meta name="description" content="Documentation for ts-codemod-lib"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">ts-codemod-lib</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"></div><div class="tsd-panel tsd-typography"><h1 id="ts-codemod-lib" class="tsd-anchor-link">ts-codemod-lib<a href="#ts-codemod-lib" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1>
<p><a href="https://www.npmjs.com/package/ts-codemod-lib"><img src="https://img.shields.io/npm/v/ts-codemod-lib.svg" alt="npm version"></a>
<a href="https://www.npmjs.com/package/ts-codemod-lib"><img src="https://img.shields.io/npm/dm/ts-codemod-lib.svg" alt="npm downloads"></a>
<a href="./LICENSE"><img src="https://img.shields.io/npm/l/ts-codemod-lib.svg" alt="License"></a>
<a href="https://codecov.io/gh/noshiro-pf/ts-codemod-lib"><img src="https://codecov.io/gh/noshiro-pf/ts-codemod-lib/graph/badge.svg?token=BVx5UgsiVr" alt="codecov"></a></p>
<p>A TypeScript library for code transformations using AST (Abstract Syntax Tree) transformers, powered by the TypeScript Compiler API.</p>
<h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p><code>ts-codemod-lib</code> provides utilities and ready-to-use transformers for automated TypeScript code transformations. It enables you to programmatically modify TypeScript source code through AST manipulation, making it ideal for large-scale refactoring tasks, enforcing type safety, and promoting immutability.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li><strong>AST-based Transformations</strong>: Leverage TypeScript Compiler API for reliable type-aware code transformations</li>
<li><strong>Ready-to-use Transformers</strong>: Append <code>as const</code>, convert to readonly types, replace <code>any</code> with <code>unknown</code>, and more</li>
<li><strong>Ready-to-use CLI Tools</strong>: Convert interfaces to types, add readonly modifiers, and more</li>
<li><strong>Extensible API</strong>: Build custom transformers using the provided utilities</li>
<li><strong>Type-safe</strong>: Written in TypeScript with strict type checking</li>
<li><strong>Selective Transformation</strong>: Support for ignoring specific lines or entire files via comments</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<pre><code class="bash"><span class="hl-0"># Using npm</span><br/><span class="hl-1">npm</span><span class="hl-2"> </span><span class="hl-3">install</span><span class="hl-2"> </span><span class="hl-4">-D</span><span class="hl-2"> </span><span class="hl-3">ts-codemod-lib</span><br/><br/><span class="hl-0"># Using pnpm</span><br/><span class="hl-1">pnpm</span><span class="hl-2"> </span><span class="hl-3">add</span><span class="hl-2"> </span><span class="hl-4">-D</span><span class="hl-2"> </span><span class="hl-3">ts-codemod-lib</span><br/><br/><span class="hl-0"># Using yarn</span><br/><span class="hl-1">yarn</span><span class="hl-2"> </span><span class="hl-3">add</span><span class="hl-2"> </span><span class="hl-4">-D</span><span class="hl-2"> </span><span class="hl-3">ts-codemod-lib</span>
</code><button type="button">Copy</button></pre>

<h2 id="available-transformers" class="tsd-anchor-link">Available Transformers<a href="#available-transformers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>This library provides TypeScript AST transformers that can be used to automatically modify your TypeScript code. The transformers can be used individually or combined for more complex transformations.</p>
<h3 id="1" class="tsd-anchor-link">1. <code>appendAsConstTransformer</code><a href="#1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Appends <code>as const</code> to array literals and object literals to make them readonly constants. This transformer helps in creating immutable data structures by automatically adding the TypeScript <code>as const</code> assertion.</p>
<p>Options:</p>
<ul>
<li><code>applyLevel</code>: <code>'all'</code> or <code>'avoidInFunctionArgs'</code> (default: <code>'avoidInFunctionArgs'</code>)
<ul>
<li><code>'avoidInFunctionArgs'</code>: Avoids adding <code>as const</code> inside function call arguments</li>
<li><code>'all'</code>: Applies <code>as const</code> everywhere</li>
</ul>
</li>
<li><code>ignorePrefixes</code>: Array of string prefixes for identifiers that should not have <code>as const</code> added (default: <code>['mut_', '#mut_', '_mut_', 'draft']</code>)</li>
</ul>
<p>Example:</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">arr</span><span class="hl-2"> = [</span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-6">2</span><span class="hl-2">, </span><span class="hl-6">3</span><span class="hl-2">];</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">obj</span><span class="hl-2"> = { </span><span class="hl-7">a:</span><span class="hl-2"> </span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-7">b:</span><span class="hl-2"> </span><span class="hl-6">2</span><span class="hl-2"> };</span><br/><br/><span class="hl-0">// After</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">arr2</span><span class="hl-2"> = [</span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-6">2</span><span class="hl-2">, </span><span class="hl-6">3</span><span class="hl-2">] </span><span class="hl-8">as</span><span class="hl-2"> </span><span class="hl-4">const</span><span class="hl-2">;</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">obj2</span><span class="hl-2"> = { </span><span class="hl-7">a:</span><span class="hl-2"> </span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-7">b:</span><span class="hl-2"> </span><span class="hl-6">2</span><span class="hl-2"> } </span><span class="hl-8">as</span><span class="hl-2"> </span><span class="hl-4">const</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="2" class="tsd-anchor-link">2. <code>convertToReadonlyTransformer</code><a href="#2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Converts TypeScript type definitions to readonly types. This transformer helps in creating more type-safe code by making types readonly where appropriate. It also normalizes nested readonly types (e.g., <code>Readonly&lt;Readonly&lt;T&gt;&gt;</code> becomes <code>Readonly&lt;T&gt;</code>).</p>
<p>Options:</p>
<ul>
<li><code>ignorePrefixes</code>: Array of string prefixes for identifiers that should not be made readonly (default: <code>['mut_', '#mut_', '_mut_', 'draft']</code>)</li>
<li><code>DeepReadonly.typeName</code>: Custom name for the DeepReadonly type utility (default: <code>&quot;DeepReadonly&quot;</code>)</li>
</ul>
<p>Example:</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">User</span><span class="hl-2"> = {</span><br/><span class="hl-2">    </span><span class="hl-7">id</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">description</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">preferences</span><span class="hl-2">: </span><span class="hl-9">Map</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">string</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">    </span><span class="hl-7">friendIds</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">[];</span><br/><span class="hl-2">    </span><span class="hl-7">mut_items</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[]; </span><span class="hl-0">// With ignorePrefixes: [&#39;mut_&#39;]</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// After</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">User2</span><span class="hl-2"> = </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;{</span><br/><span class="hl-2">    </span><span class="hl-7">id</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">description</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">preferences</span><span class="hl-2">: </span><span class="hl-9">ReadonlyMap</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">string</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">    </span><span class="hl-7">friendIds</span><span class="hl-2">: </span><span class="hl-4">readonly</span><span class="hl-2"> </span><span class="hl-9">number</span><span class="hl-2">[];</span><br/><span class="hl-2">    </span><span class="hl-7">mut_items</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[]; </span><span class="hl-0">// Not made readonly due to &#39;mut_&#39; prefix</span><br/><span class="hl-2">}&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>For more detailed transformation examples, see the <a href="./src/functions/ast-transformers/convert-to-readonly-type.test.mts">test file</a> which covers various scenarios including complex types, nested structures, and DeepReadonly transformations.</p>
<h3 id="3" class="tsd-anchor-link">3. <code>convertInterfaceToTypeTransformer</code><a href="#3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Converts TypeScript interface declarations to type aliases. This transformer helps in maintaining consistency by using type aliases throughout the codebase.</p>
<p>Example:</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">interface</span><span class="hl-2"> </span><span class="hl-9">User</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">id</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">name</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// After</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">User2</span><span class="hl-2"> = {</span><br/><span class="hl-2">    </span><span class="hl-7">id</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-7">name</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="4" class="tsd-anchor-link">4. <code>replaceAnyWithUnknownTransformer</code><a href="#4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Replaces <code>any</code> type annotations with <code>unknown</code> for improved type safety. The <code>unknown</code> type requires type checking before operations, making your code more robust. For function parameters with rest arguments, <code>(...args: any) =&gt; R</code> is converted to <code>(...args: readonly unknown[]) =&gt; R</code>.</p>
<p>Example:</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-1">getValue</span><span class="hl-2"> = (</span><span class="hl-7">data</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">): </span><span class="hl-9">any</span><span class="hl-2"> </span><span class="hl-4">=&gt;</span><span class="hl-2"> </span><span class="hl-7">data</span><span class="hl-2">.</span><span class="hl-7">value</span><span class="hl-2">;</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-1">sortValues</span><span class="hl-2"> = (...</span><span class="hl-7">args</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">): </span><span class="hl-9">any</span><span class="hl-2"> </span><span class="hl-4">=&gt;</span><br/><span class="hl-2">    </span><span class="hl-7">args</span><span class="hl-2">.</span><span class="hl-1">toSorted</span><span class="hl-2">((</span><span class="hl-7">a</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">, </span><span class="hl-7">b</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">) </span><span class="hl-4">=&gt;</span><span class="hl-2"> </span><span class="hl-7">a</span><span class="hl-2"> - </span><span class="hl-7">b</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// After</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-1">getValue2</span><span class="hl-2"> = (</span><span class="hl-7">data</span><span class="hl-2">: </span><span class="hl-9">unknown</span><span class="hl-2">): </span><span class="hl-9">unknown</span><span class="hl-2"> </span><span class="hl-4">=&gt;</span><span class="hl-2"> (</span><span class="hl-7">data</span><span class="hl-2"> </span><span class="hl-8">as</span><span class="hl-2"> </span><span class="hl-9">any</span><span class="hl-2">).</span><span class="hl-7">value</span><span class="hl-2">;</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-1">sortValues2</span><span class="hl-2"> = (...</span><span class="hl-7">args</span><span class="hl-2">: </span><span class="hl-4">readonly</span><span class="hl-2"> </span><span class="hl-9">unknown</span><span class="hl-2">[]): </span><span class="hl-9">unknown</span><span class="hl-2"> </span><span class="hl-4">=&gt;</span><br/><span class="hl-2">    (</span><span class="hl-7">args</span><span class="hl-2"> </span><span class="hl-8">as</span><span class="hl-2"> </span><span class="hl-9">any</span><span class="hl-2">).</span><span class="hl-1">toSorted</span><span class="hl-2">((</span><span class="hl-7">a</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">, </span><span class="hl-7">b</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2">) </span><span class="hl-4">=&gt;</span><span class="hl-2"> </span><span class="hl-7">a</span><span class="hl-2"> - </span><span class="hl-7">b</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<p>For more detailed transformation examples, see the <a href="media/replace-any-with-unknown.test.mts">test file</a> which covers various scenarios including function parameters, return types, and variable declarations.</p>
<h3 id="5" class="tsd-anchor-link">5. <code>replaceRecordWithUnknownRecordTransformer</code><a href="#5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Replaces <code>Record&lt;string, unknown&gt;</code> and <code>Readonly&lt;Record&lt;string, unknown&gt;&gt;</code> with <code>UnknownRecord</code> for better type safety and consistency. This transformer also handles index signatures <code>[k: string]: unknown</code> in interfaces and type literals.</p>
<p>Example:</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Config</span><span class="hl-2"> = </span><span class="hl-9">Record</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">unknown</span><span class="hl-2">&gt;;</span><br/><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">ReadonlyConfig</span><span class="hl-2"> = </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;</span><span class="hl-9">Record</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">unknown</span><span class="hl-2">&gt;&gt;;</span><br/><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Data</span><span class="hl-2"> = </span><span class="hl-9">Record</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">unknown</span><span class="hl-2">&gt;;</span><br/><br/><span class="hl-0">// After</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Config2</span><span class="hl-2"> = </span><span class="hl-9">UnknownRecord</span><span class="hl-2">;</span><br/><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">ReadonlyConfig2</span><span class="hl-2"> = </span><span class="hl-9">UnknownRecord</span><span class="hl-2">;</span><br/><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Data2</span><span class="hl-2"> = </span><span class="hl-9">UnknownRecord</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="disabling-transformers" class="tsd-anchor-link">Disabling Transformers<a href="#disabling-transformers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<ul>
<li>Nodes on the line immediately following a <code>// transformer-ignore-next-line</code> comment will be skipped.
<ul>
<li>You can specify transformer names to ignore: <code>// transformer-ignore-next-line append-as-const, replace-any-with-unknown</code></li>
<li>If no transformer names are specified, all transformers will be skipped.</li>
</ul>
</li>
<li>Files containing a <code>/* transformer-ignore */</code> comment will be skipped entirely.</li>
</ul>
<p>Examples:</p>
<p><strong>Example using <code>// transformer-ignore-next-line</code>:</strong></p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Config</span><span class="hl-2"> = {</span><br/><span class="hl-2">    </span><span class="hl-7">apiKey</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-0">// transformer-ignore-next-line</span><br/><span class="hl-2">    </span><span class="hl-7">mutableOptions</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[]; </span><span class="hl-0">// This line will not be made Readonly</span><br/><span class="hl-2">    </span><span class="hl-7">settings</span><span class="hl-2">: { </span><span class="hl-7">timeout</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2"> };</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// After applying convertToReadonlyTransformer</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Config2</span><span class="hl-2"> = </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;{</span><br/><span class="hl-2">    </span><span class="hl-7">apiKey</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-0">// transformer-ignore-next-line</span><br/><span class="hl-2">    </span><span class="hl-7">mutableOptions</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[]; </span><span class="hl-0">// Not made Readonly because it was skipped</span><br/><span class="hl-2">    </span><span class="hl-7">settings</span><span class="hl-2">: </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;{ </span><span class="hl-7">timeout</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2"> }&gt;;</span><br/><span class="hl-2">}&gt;;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example using <code>/* transformer-ignore */</code>:</strong></p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Data</span><span class="hl-2"> = { </span><span class="hl-7">value</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2"> };</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">items</span><span class="hl-2"> = [</span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-6">2</span><span class="hl-2">, </span><span class="hl-6">3</span><span class="hl-2">];</span><br/><br/><span class="hl-0">// After applying any transformer (e.g., replaceAnyWithUnknownTransformer, appendAsConstTransformer)</span><br/><span class="hl-0">// No changes will be made to this file.</span><br/><span class="hl-4">type</span><span class="hl-2"> </span><span class="hl-9">Data2</span><span class="hl-2"> = { </span><span class="hl-7">value</span><span class="hl-2">: </span><span class="hl-9">any</span><span class="hl-2"> };</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">items2</span><span class="hl-2"> = [</span><span class="hl-6">1</span><span class="hl-2">, </span><span class="hl-6">2</span><span class="hl-2">, </span><span class="hl-6">3</span><span class="hl-2">];</span>
</code><button type="button">Copy</button></pre>

<h2 id="cli-tools" class="tsd-anchor-link">CLI Tools<a href="#cli-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>This package provides command-line tools for common TypeScript transformations:</p>
<h3 id="append-as-const" class="tsd-anchor-link">append-as-const<a href="#append-as-const" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Appends <code>as const</code> to array literals and object literals to make them readonly constants.</p>
<pre><code class="bash"><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">append-as-const</span><span class="hl-2"> &lt;</span><span class="hl-3">baseDi</span><span class="hl-2">r&gt; [--exclude &lt;</span><span class="hl-3">patter</span><span class="hl-2">n&gt;</span><span class="hl-3">]</span><span class="hl-2"> [--silent]</span>
</code><button type="button">Copy</button></pre>

<h3 id="convert-interface-to-type" class="tsd-anchor-link">convert-interface-to-type<a href="#convert-interface-to-type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Converts TypeScript interface declarations to type aliases.</p>
<pre><code class="bash"><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">convert-interface-to-type</span><span class="hl-2"> &lt;</span><span class="hl-3">baseDi</span><span class="hl-2">r&gt; [--exclude &lt;</span><span class="hl-3">patter</span><span class="hl-2">n&gt;</span><span class="hl-3">]</span><span class="hl-2"> [--silent]</span>
</code><button type="button">Copy</button></pre>

<h3 id="convert-to-readonly" class="tsd-anchor-link">convert-to-readonly<a href="#convert-to-readonly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Adds <code>readonly</code> modifiers to type definitions throughout your codebase.</p>
<pre><code class="bash"><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">convert-to-readonly</span><span class="hl-2"> &lt;</span><span class="hl-3">baseDi</span><span class="hl-2">r&gt; [--exclude &lt;</span><span class="hl-3">patter</span><span class="hl-2">n&gt;</span><span class="hl-3">]</span><span class="hl-2"> [--silent]</span>
</code><button type="button">Copy</button></pre>

<h3 id="replace-any-with-unknown" class="tsd-anchor-link">replace-any-with-unknown<a href="#replace-any-with-unknown" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Replaces <code>any</code> type annotations with <code>unknown</code> for improved type safety.</p>
<pre><code class="bash"><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">replace-any-with-unknown</span><span class="hl-2"> &lt;</span><span class="hl-3">baseDi</span><span class="hl-2">r&gt; [--exclude &lt;</span><span class="hl-3">patter</span><span class="hl-2">n&gt;</span><span class="hl-3">]</span><span class="hl-2"> [--silent]</span>
</code><button type="button">Copy</button></pre>

<h3 id="replace-record-with-unknown-record" class="tsd-anchor-link">replace-record-with-unknown-record<a href="#replace-record-with-unknown-record" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Replaces <code>Record&lt;string, unknown&gt;</code> with <code>UnknownRecord</code> for better type safety.</p>
<pre><code class="bash"><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">replace-record-with-unknown-record</span><span class="hl-2"> &lt;</span><span class="hl-3">baseDi</span><span class="hl-2">r&gt; [--exclude &lt;</span><span class="hl-3">patter</span><span class="hl-2">n&gt;</span><span class="hl-3">]</span><span class="hl-2"> [--silent]</span>
</code><button type="button">Copy</button></pre>

<p><strong>Common Options:</strong></p>
<ul>
<li><code>baseDir</code>: Base directory to scan for TypeScript files</li>
<li><code>--exclude</code>: Glob patterns to exclude (e.g., <code>&quot;src/generated/**/*.mts&quot;</code>)</li>
<li><code>--silent</code>: Suppress output messages</li>
</ul>
<h2 id="programmatic-usage" class="tsd-anchor-link">Programmatic Usage<a href="#programmatic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<h3 id="using-transformers-with-string-inputoutput" class="tsd-anchor-link">Using Transformers with String Input/Output<a href="#using-transformers-with-string-inputoutput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can use the <code>astTransformerToStringTransformer</code> utility to apply these transformers to source code strings:</p>
<pre><code class="tsx"><span class="hl-8">import</span><span class="hl-2"> </span><span class="hl-7">dedent</span><span class="hl-2"> </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-3">&#39;dedent&#39;</span><span class="hl-2">;</span><br/><span class="hl-8">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">appendAsConstTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">convertInterfaceToTypeTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">convertToReadonlyTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">replaceAnyWithUnknownTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">replaceRecordWithUnknownRecordTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">transformSourceCode</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-3">&#39;ts-codemod-lib&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">originalCode</span><span class="hl-2"> = </span><span class="hl-1">dedent</span><span class="hl-3">`</span><br/><span class="hl-3">  export interface A {</span><br/><span class="hl-3">    name?: string;</span><br/><span class="hl-3">    point: [x: number, y: number, z?: number];</span><br/><span class="hl-3">    meta: {</span><br/><span class="hl-3">      description?: string;</span><br/><span class="hl-3">      tags: string[];</span><br/><span class="hl-3">      attributes: Record&lt;string, unknown&gt;;</span><br/><span class="hl-3">      data?: any;</span><br/><span class="hl-3">    };</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  export const obj = {</span><br/><span class="hl-3">    point: [1, 2],</span><br/><span class="hl-3">    meta: {</span><br/><span class="hl-3">      tags: [&#39;example&#39;, &#39;test&#39;],</span><br/><span class="hl-3">      attributes: {</span><br/><span class="hl-3">        key1: &#39;value1&#39;,</span><br/><span class="hl-3">        key2: 42,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">    },</span><br/><span class="hl-3">  } satisfies A;</span><br/><br/><span class="hl-3">  export const arr = [&#39;a&#39;, {}, 0];</span><br/><span class="hl-3">`</span><span class="hl-2">;</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">isTsx</span><span class="hl-2"> = </span><span class="hl-4">false</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Apply transformations to source code</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">transformedCode</span><span class="hl-2"> = </span><span class="hl-1">transformSourceCode</span><span class="hl-2">(</span><span class="hl-7">originalCode</span><span class="hl-2">, </span><span class="hl-7">isTsx</span><span class="hl-2">, [</span><br/><span class="hl-2">    </span><span class="hl-1">convertInterfaceToTypeTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">    </span><span class="hl-1">replaceRecordWithUnknownRecordTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">    </span><span class="hl-1">convertToReadonlyTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">    </span><span class="hl-1">appendAsConstTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">    </span><span class="hl-1">replaceAnyWithUnknownTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">expected</span><span class="hl-2"> = </span><span class="hl-1">dedent</span><span class="hl-3">`</span><br/><span class="hl-3">  export type A = Readonly&lt; {</span><br/><span class="hl-3">    name?: string;</span><br/><span class="hl-3">    point: (readonly  [x: number, y: number, z?: number]);</span><br/><span class="hl-3">    meta: Readonly&lt; {</span><br/><span class="hl-3">        description?: string;</span><br/><span class="hl-3">        tags: (readonly  string[]);</span><br/><span class="hl-3">        attributes: UnknownRecord;</span><br/><span class="hl-3">        data?: unknown;</span><br/><span class="hl-3">      }&gt;;</span><br/><span class="hl-3">  }&gt;;</span><br/><br/><span class="hl-3">  export const obj = {</span><br/><span class="hl-3">    point: [1, 2],</span><br/><span class="hl-3">    meta: {</span><br/><span class="hl-3">      tags: [&#39;example&#39;, &#39;test&#39;],</span><br/><span class="hl-3">      attributes: {</span><br/><span class="hl-3">        key1: &#39;value1&#39;,</span><br/><span class="hl-3">        key2: 42,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">    },</span><br/><span class="hl-3">  } as const satisfies A;</span><br/><br/><span class="hl-3">  export const arr = [&#39;a&#39;, {}, 0] as const;</span><br/><span class="hl-3">`</span><span class="hl-2">;</span><br/><br/><span class="hl-8">if</span><span class="hl-2"> (</span><span class="hl-8">import</span><span class="hl-2">.</span><span class="hl-7">meta</span><span class="hl-2">.</span><span class="hl-7">vitest</span><span class="hl-2"> !== </span><span class="hl-4">undefined</span><span class="hl-2">) {</span><br/><span class="hl-2">    </span><span class="hl-1">test</span><span class="hl-2">(</span><span class="hl-3">&#39;transformSourceCode&#39;</span><span class="hl-2">, () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-7">assert</span><span class="hl-2">.</span><span class="hl-1">isTrue</span><span class="hl-2">(</span><span class="hl-7">transformedCode</span><span class="hl-2"> === </span><span class="hl-7">expected</span><span class="hl-2">);</span><br/><span class="hl-2">    });</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>Note: It is recommended to apply all transformers at once using <code>transformSourceCode</code> rather than applying each transformer individually.
This is more efficient as it avoids the overhead of parsing and printing before and after applying each AST transformation.</p>
<h3 id="apply-transformers-to-directory" class="tsd-anchor-link">Apply Transformers to <code>src</code> Directory<a href="#apply-transformers-to-directory" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<pre><code class="tsx"><span class="hl-8">import</span><span class="hl-2"> </span><span class="hl-4">*</span><span class="hl-2"> </span><span class="hl-8">as</span><span class="hl-2"> </span><span class="hl-7">fs</span><span class="hl-2"> </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-3">&#39;node:fs/promises&#39;</span><span class="hl-2">;</span><br/><span class="hl-8">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">appendAsConstTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">convertInterfaceToTypeTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">convertToReadonlyTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">replaceAnyWithUnknownTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">replaceRecordWithUnknownRecordTransformer</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">transformSourceCode</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-3">&#39;ts-codemod-lib&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-8">for</span><span class="hl-2"> </span><span class="hl-8">await</span><span class="hl-2"> (</span><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">filePath</span><span class="hl-2"> </span><span class="hl-4">of</span><span class="hl-2"> </span><span class="hl-7">fs</span><span class="hl-2">.</span><span class="hl-1">glob</span><span class="hl-2">(</span><span class="hl-3">&#39;path/to/src/**/*.{mts,tsx}&#39;</span><span class="hl-2">)) {</span><br/><span class="hl-2">    </span><span class="hl-8">if</span><span class="hl-2"> (</span><span class="hl-7">filePath</span><span class="hl-2">.</span><span class="hl-1">endsWith</span><span class="hl-2">(</span><span class="hl-3">&#39;.d.mts&#39;</span><span class="hl-2">)) {</span><br/><span class="hl-2">        </span><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">`Skipping declaration file: </span><span class="hl-4">${</span><span class="hl-7">filePath</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-2">);</span><br/><br/><span class="hl-2">        </span><span class="hl-8">continue</span><span class="hl-2">;</span><br/><span class="hl-2">    }</span><br/><br/><span class="hl-2">    </span><span class="hl-7">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">`Processing file: </span><span class="hl-4">${</span><span class="hl-7">filePath</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">originalCode</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-7">fs</span><span class="hl-2">.</span><span class="hl-1">readFile</span><span class="hl-2">(</span><span class="hl-7">filePath</span><span class="hl-2">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">isTsx</span><span class="hl-2"> = </span><span class="hl-7">filePath</span><span class="hl-2">.</span><span class="hl-1">endsWith</span><span class="hl-2">(</span><span class="hl-3">&#39;.tsx&#39;</span><span class="hl-2">) || </span><span class="hl-7">filePath</span><span class="hl-2">.</span><span class="hl-1">endsWith</span><span class="hl-2">(</span><span class="hl-3">&#39;.jsx&#39;</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// Apply transformations to source code</span><br/><span class="hl-2">    </span><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-5">transformedCode</span><span class="hl-2"> = </span><span class="hl-1">transformSourceCode</span><span class="hl-2">(</span><span class="hl-7">originalCode</span><span class="hl-2">, </span><span class="hl-7">isTsx</span><span class="hl-2">, [</span><br/><span class="hl-2">        </span><span class="hl-1">convertInterfaceToTypeTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">        </span><span class="hl-1">replaceRecordWithUnknownRecordTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">        </span><span class="hl-1">convertToReadonlyTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">        </span><span class="hl-1">appendAsConstTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">        </span><span class="hl-1">replaceAnyWithUnknownTransformer</span><span class="hl-2">(),</span><br/><span class="hl-2">    ]);</span><br/><br/><span class="hl-2">    </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-7">fs</span><span class="hl-2">.</span><span class="hl-1">writeFile</span><span class="hl-2">(</span><span class="hl-7">filePath</span><span class="hl-2">, </span><span class="hl-7">transformedCode</span><span class="hl-2">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>Run:</p>
<pre><code class="sh"><span class="hl-1">node</span><span class="hl-2"> </span><span class="hl-3">codemod.mjs</span>
</code><button type="button">Copy</button></pre>

<h2 id="notes" class="tsd-anchor-link">Notes<a href="#notes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li>
<p>Types within JSDoc comments are not transformed.</p>
<pre><code class="ts"><span class="hl-0">// Before</span><br/><span class="hl-0">/**</span><br/><span class="hl-0"> * Processes user data.</span><br/><span class="hl-0"> * </span><span class="hl-4">@param</span><span class="hl-0"> </span><span class="hl-9">{object}</span><span class="hl-0"> </span><span class="hl-7">user</span><span class="hl-0"> - The user object.</span><br/><span class="hl-0"> * </span><span class="hl-4">@param</span><span class="hl-0"> </span><span class="hl-9">{string[]}</span><span class="hl-0"> </span><span class="hl-7">user.roles</span><span class="hl-0"> - User roles.</span><br/><span class="hl-0"> * </span><span class="hl-4">@returns</span><span class="hl-0"> </span><span class="hl-9">{object}</span><span class="hl-0"> Processed data.</span><br/><span class="hl-0"> */</span><br/><span class="hl-4">function</span><span class="hl-2"> </span><span class="hl-1">processUser</span><span class="hl-2">(</span><span class="hl-7">user</span><span class="hl-2">: { </span><span class="hl-7">name</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">; </span><span class="hl-7">roles</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[] }): {</span><br/><span class="hl-2">    </span><span class="hl-7">success</span><span class="hl-2">: </span><span class="hl-9">boolean</span><span class="hl-2">;</span><br/><span class="hl-2">} {</span><br/><span class="hl-2">    </span><span class="hl-0">// ... implementation ...</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> { </span><span class="hl-7">success:</span><span class="hl-2"> </span><span class="hl-4">true</span><span class="hl-2"> };</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// After applying convertToReadonlyTransformer</span><br/><span class="hl-0">/**</span><br/><span class="hl-0"> * Processes user data.</span><br/><span class="hl-0"> * </span><span class="hl-4">@param</span><span class="hl-0"> </span><span class="hl-9">{object}</span><span class="hl-0"> </span><span class="hl-7">user</span><span class="hl-0"> - The user object. // JSDoc type is not changed</span><br/><span class="hl-0"> * </span><span class="hl-4">@param</span><span class="hl-0"> </span><span class="hl-9">{string[]}</span><span class="hl-0"> </span><span class="hl-7">user.roles</span><span class="hl-0"> - User roles. // JSDoc type is not changed</span><br/><span class="hl-0"> * </span><span class="hl-4">@returns</span><span class="hl-0"> </span><span class="hl-9">{object}</span><span class="hl-0"> Processed data. // JSDoc type is not changed</span><br/><span class="hl-0"> */</span><br/><span class="hl-4">function</span><span class="hl-2"> </span><span class="hl-1">processUser</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-7">user</span><span class="hl-2">: </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;{ </span><span class="hl-7">name</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">; </span><span class="hl-7">roles</span><span class="hl-2">: </span><span class="hl-4">readonly</span><span class="hl-2"> </span><span class="hl-9">string</span><span class="hl-2">[] }&gt;,</span><br/><span class="hl-2">): </span><span class="hl-9">Readonly</span><span class="hl-2">&lt;{ </span><span class="hl-7">success</span><span class="hl-2">: </span><span class="hl-9">boolean</span><span class="hl-2"> }&gt; {</span><br/><span class="hl-2">    </span><span class="hl-0">// ... implementation ...</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> { </span><span class="hl-7">success:</span><span class="hl-2"> </span><span class="hl-4">true</span><span class="hl-2"> };</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p>Comment positions might change due to the heuristics used for restoring comments in the code.</p>
<ul>
<li>When parsing source code into an AST using the TypeScript Compiler API, comments are often attached to the preceding or succeeding node. However, sometimes comments become detached (orphaned). These detached comments might be omitted when the source code string is generated by TypeScript's printer (though some might be restored). <code>ts-codemod-lib</code> includes preprocessing to identify all detached comments that the printer cannot restore and reattaches them to the immediately preceding or succeeding node, making them printable. However, the determination of whether to attach the comment before or after the node is heuristic, so the comment might move to a different position than in the original code.</li>
<li>Possible workarounds include experimenting to find comment positions less likely to become orphaned (comments clearly preceding a node are less likely to be orphaned) or excluding the relevant section from transformation using the <code>// transformer-ignore-next-line</code> comment.</li>
<li>I intend to resolve practical issues as much as possible, so please submit an issue if you find any problems.</li>
<li>Related link: <a href="https://github.com/microsoft/TypeScript/issues/20506#issuecomment-349740820">https://github.com/microsoft/TypeScript/issues/20506#issuecomment-349740820</a></li>
</ul>
</li>
</ul>
<h2 id="documentation" class="tsd-anchor-link">Documentation<a href="#documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li>API reference: <a href="https://noshiro-pf.github.io/ts-codemod-lib/">https://noshiro-pf.github.io/ts-codemod-lib/</a></li>
</ul>
<h2 id="for-developers" class="tsd-anchor-link">For Developers<a href="#for-developers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<h3 id="local-setup" class="tsd-anchor-link">Local Setup<a href="#local-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<pre><code class="sh"><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">clone</span><span class="hl-2"> </span><span class="hl-3">https://github.com/noshiro-pf/ts-codemod-lib.git</span><br/><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">submodule</span><span class="hl-2"> </span><span class="hl-3">update</span><span class="hl-2"> </span><span class="hl-4">--init</span><span class="hl-2"> </span><span class="hl-4">--recursive</span><br/><span class="hl-1">pnpm</span><span class="hl-2"> </span><span class="hl-3">i</span>
</code><button type="button">Copy</button></pre>

<h3 id="syncing-agentsmd-updates" class="tsd-anchor-link">Syncing <a href="http://AGENTS.md">AGENTS.md</a> Updates<a href="#syncing-agentsmd-updates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<ol>
<li>Update <code>AGENTS.md</code> in the common repository (<code>common-agent-config</code>)</li>
<li>Update the submodule in each project</li>
</ol>
<pre><code class="bash"><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">submodule</span><span class="hl-2"> </span><span class="hl-3">update</span><span class="hl-2"> </span><span class="hl-4">--remote</span><span class="hl-2"> </span><span class="hl-4">--merge</span><br/><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">add</span><span class="hl-2"> </span><span class="hl-3">agents/common</span><br/><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">commit</span><span class="hl-2"> </span><span class="hl-4">-m</span><span class="hl-2"> </span><span class="hl-3">&quot;Update AGENTS.md&quot;</span>
</code><button type="button">Copy</button></pre>

<h3 id="resources" class="tsd-anchor-link">Resources<a href="#resources" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<ul>
<li><a href="https://ts-ast-viewer.com/#">https://ts-ast-viewer.com/#</a></li>
<li><a href="https://github.com/itsdouges/typescript-transformer-handbook">https://github.com/itsdouges/typescript-transformer-handbook</a></li>
<li><a href="https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API">https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API</a></li>
<li><a href="https://blog.nnn.dev/entry/2022/03/10/110000">https://blog.nnn.dev/entry/2022/03/10/110000</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ts-codemod-lib"><span>ts-<wbr/>codemod-<wbr/>lib</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#available-transformers"><span>Available <wbr/>Transformers</span></a></li><li><ul><li><a href="#1"><span>1. </span></a></li><li><a href="#2"><span>2. </span></a></li><li><a href="#3"><span>3. </span></a></li><li><a href="#4"><span>4. </span></a></li><li><a href="#5"><span>5. </span></a></li><li><a href="#disabling-transformers"><span>Disabling <wbr/>Transformers</span></a></li></ul></li><li><a href="#cli-tools"><span>CLI <wbr/>Tools</span></a></li><li><ul><li><a href="#append-as-const"><span>append-<wbr/>as-<wbr/>const</span></a></li><li><a href="#convert-interface-to-type"><span>convert-<wbr/>interface-<wbr/>to-<wbr/>type</span></a></li><li><a href="#convert-to-readonly"><span>convert-<wbr/>to-<wbr/>readonly</span></a></li><li><a href="#replace-any-with-unknown"><span>replace-<wbr/>any-<wbr/>with-<wbr/>unknown</span></a></li><li><a href="#replace-record-with-unknown-record"><span>replace-<wbr/>record-<wbr/>with-<wbr/>unknown-<wbr/>record</span></a></li></ul></li><li><a href="#programmatic-usage"><span>Programmatic <wbr/>Usage</span></a></li><li><ul><li><a href="#using-transformers-with-string-inputoutput"><span>Using <wbr/>Transformers with <wbr/>String <wbr/>Input/<wbr/>Output</span></a></li><li><a href="#apply-transformers-to-directory"><span>Apply <wbr/>Transformers to  <wbr/>Directory</span></a></li></ul></li><li><a href="#notes"><span>Notes</span></a></li><li><a href="#documentation"><span>Documentation</span></a></li><li><a href="#for-developers"><span>For <wbr/>Developers</span></a></li><li><ul><li><a href="#local-setup"><span>Local <wbr/>Setup</span></a></li><li><a href="#syncing-agentsmd-updates"><span>Syncing <wbr/>AGENTS.md <wbr/>Updates</span></a></li><li><a href="#resources"><span>Resources</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">ts-codemod-lib</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/JulianWowra/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
